<p>
  <img width="100" alt="image" src="https://github.com/chaeondev/Blink/assets/80023607/cf3a2161-422f-462c-8d6b-29c1ff47b771">
</p>

# Blink

#### ì‚¬ìš©ì ê°„ íŒ€ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ê°€ëŠ¥í•œ ë©”ì‹ ì € ì•±ì…ë‹ˆë‹¤.

## Preview

<img width="1000" alt="image" src="https://github.com/chaeondev/Blink/assets/80023607/9fd7c6c4-13da-46e2-a7fd-f3f88cee6387">


[ğŸ“± ìƒì„¸ UI ë³´ëŸ¬ê°€ê¸°](https://github.com/chaeondev/Blink#ui) 


## í”„ë¡œì íŠ¸ ì†Œê°œ

> ì•± ì†Œê°œ
- ì†Œì…œë¡œê·¸ì¸(ì• í”Œ, ì¹´ì¹´ì˜¤), ì´ë©”ì¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ ì œê³µ
- ì›Œí¬ìŠ¤í˜ì´ìŠ¤, ì±„ë„ CRUD ê¸°ëŠ¥
- ì±„ë„, DMì—ì„œ ì‹¤ì‹œê°„ ì±„íŒ… ì œê³µ (í…ìŠ¤íŠ¸, ì´ë¯¸ì§€ ì†¡ìˆ˜ì‹  ê°€ëŠ¥)
- ì±„íŒ…ë°© ì•Œë¦¼(Remote Push) ì‹¤ì‹œê°„ ìˆ˜ì‹ 
- ì•± ë‚´ ì¸ì•±ê²°ì œë¥¼ í†µí•œ ì½”ì¸ ì¶©ì „ ê°€ëŠ¥

---

> ì„œë¹„ìŠ¤
- **ê°œë°œì¸ì›** : 1ì¸ ê°œë°œ
- **ê°œë°œê¸°ê°„** : 2024.01.03 - 2024.02.22 (7ì£¼)
- **í˜‘ì—…íˆ´** : Git, Figma, Confluence, Swagger
- **iOS Deployment Target** : iOS 16.0

---

> ê¸°ìˆ ìŠ¤íƒ
- **í”„ë ˆì„ì›Œí¬** : UIKit, WebKit
- **ë””ìì¸íŒ¨í„´** : MVVM, Input/Output, Singleton, Repository
- **ë¼ì´ë¸ŒëŸ¬ë¦¬** :
  - RxSwift, SocketIO, Alamofire, Realm, Kingfisher,  
  - iamport, Firebase(Cloud Messaging), RxKakaoOpenSDK  
  - SideMenu, Toast, SnapKit, IQKeyboardManager  
- **ì˜ì¡´ì„±ê´€ë¦¬** : Swift Package Manager
- **ETC** : CodabaseUI, CompositionalLayout, PHPicker, UIImagePicker, PropertyWrapper, KeyChain

---

> ì£¼ìš”ê¸°ëŠ¥

- **RxKakaoSDK**(ì¹´ì¹´ì˜¤), **AuthenticationServices**(ì• í”Œ)ì„ í†µí•´ **ì†Œì…œ ë¡œê·¸ì¸** ì œê³µ
- **First Responder**, Toast Messageë¥¼ í™œìš©í•´ **RxSwift** ê¸°ë°˜ **ë°˜ì‘í˜•** íšŒì›ê°€ì… ë¡œì§ êµ¬í˜„
- í™ˆ í™”ë©´ì—ì„œ **ê³„ì¸µì  ë°ì´í„° êµ¬ì¡°**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **Expandable Section** TableView UIë¥¼ êµ¬í˜„
- **Dispatch Group**ì„ í™œìš©í•˜ì—¬ ë¹„ë™ê¸° ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œì˜ ìˆœì°¨ì  ì‹¤í–‰ì„ ë³´ì¥
- **SocketIO**ë¥¼ í™œìš©í•˜ì—¬ ì–‘ë°©í–¥ **ì‹¤ì‹œê°„** í†µì‹  ê¸°ë°˜ ë‹¤ì¸ì› **ì±„íŒ…** ì‹œìŠ¤í…œ êµ¬í˜„
- ê³¼ê±° ì±„íŒ… ë‚´ì—­ì„ **Realm DB**ì— ì €ì¥í•˜ì—¬, **ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ìµœì†Œí™”**
- **Compositional Layout**ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ ê°œìˆ˜ì— ê¸°ë°˜í•œ **ë™ì ì¸ ì±„íŒ… ë ˆì´ì•„ì›ƒ** ì¡°ì •
- **Firebase Cloud Messaging**ì„ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì±„íŒ… **Remote Push Notification** ìˆ˜ì‹ 
- **í¬íŠ¸ì›**ì„ ì—°ë™í•˜ì—¬ WebView ê¸°ë°˜ **ì¸ì•± ê²°ì œ** êµ¬í˜„, ê²°ì œ ì˜ìˆ˜ì¦ ê²€ì¦ì„ í†µí•œ ì„œë²„ ìœ íš¨ì„± í™•ì¸ ë° ì½”ì¸ ë°˜ì˜
- **RxSwift**ë¥¼ í™œìš©í•˜ì—¬ **MVVM** ì•„í‚¤í…ì²˜ ë‚´ì—ì„œ **Input/Output** íŒ¨í„´ì„ êµ¬í˜„
- **Alamofire**ì˜ **URLRequestConvertible**ì„ í†µí•´ **Router** íŒ¨í„´ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì¶”ìƒí™” ë° ëª¨ë“ˆí™”



[ğŸ“± ìƒì„¸ UI ë³´ëŸ¬ê°€ê¸°](https://github.com/chaeondev/Blink#ui)

---

<br> </br>

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. í™”ë©´ ë‚´ ë‹¤ìˆ˜ì˜ ë¹„ë™ê¸° ë„¤íŠ¸ì›Œí¬ ì½œì—ì„œ ë°œìƒí•˜ëŠ” ìˆœì„œ ì˜ì¡´ì„± ì—ëŸ¬

#### Issue
í™ˆí™”ë©´ì— ì±„íŒ… ëª©ë¡ê³¼ ì•ˆì½ì€ ë©”ì„¸ì§€ ê°œìˆ˜ë¥¼ ë°ì´í„°ë¡œ ìš”ì²­í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. 
**ì—¬ëŸ¬ ë²ˆì˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ ìˆœì°¨ì **ìœ¼ë¡œ ì¼ì–´ë‚˜ì•¼ í–ˆëŠ”ë°, ë„¤íŠ¸ì›Œí¬ í†µì‹ ì€ **ë¹„ë™ê¸° ì‘ì—…**ìœ¼ë¡œ ìˆ˜í–‰ë˜ê¸° ë•Œë¬¸ì— ì‘ì—… ì™„ë£Œ ì‹œì ì„ ì²´í¬í•˜ê¸° í˜ë“¤ì—ˆìŠµë‹ˆë‹¤.
ì´ë¡œ ì¸í•´ ì±„íŒ… ëª©ë¡ ë˜ëŠ” ì•ˆì½ì€ ë©”ì„¸ì§€ ê°œìˆ˜ ë°ì´í„°ê°€ ëˆ„ë½ëœ ì±„ë¡œ ë·°ê°€ ë³´ì—¬ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

#### Solution
completionHandlerì™€ **DispatchGroup**ì„ ì´ìš©í•´ ì‘ì—… ì™„ë£Œ ì‹œì ì„ ì²´í¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
ì•ˆì½ì€ ë©”ì„¸ì§€ ê°œìˆ˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì˜ ê²½ìš° ì—¬ëŸ¬ ë²ˆì˜ ë¹„ë™ê¸° ì‘ì—…ì„ ê·¸ë£¹í™”í•˜ê³ , ì™„ë£Œ ì‹œì ì„ **notify**ë¡œ ì²´í¬í–ˆìŠµë‹ˆë‹¤.
ì´í›„ í•´ë‹¹ ì‹œì ì— completion()ì„ í†µí•´ ì›í•˜ëŠ” ì‘ì—…ì„ ì›í•˜ëŠ” ì‹œì ì— í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```swift
//HomeDefaultViewModel

func fetchDMInfo(completion: @escaping () -> Void) {
    APIService.shared.requestCompletion(type: [DMsRoomRes].self, api: DMSRouter.checkDMRooms(self.workspaceID)) { [weak self] result in
        switch result {
        case .success(let response):
            print("===DM ì •ë³´ ì¡°íšŒ ì„±ê³µ ===")
            self?.dmData = HomeDMsData(
                opened: true,
                sectionData: response.map {
                    HomeDMsData.DMCellInfo(dmInfo: $0, unreadDMCnt: 10)
                }
            )
            self?.fetchDMsUnreadCount {
                completion()
            }
            
        case .failure(let error):
            print("===DM ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨ ===", error)
        }
    }
}

func fetchDMsUnreadCount(completion: @escaping () -> Void) {
  guard let dmData else { return }
  
  let group = DispatchGroup()
  
  for (index, item) in dmData.sectionData.enumerated() {
      let requestModel = DMsUnreadCountRequest(
          roomID: item.dmInfo.room_id,
          workspaceID: self.workspaceID,
          after: item.dmInfo.createdAt)
      
      group.enter()
      APIService.shared.requestCompletion(type: DMsUnreadCountResponse.self, api: DMSRouter.dmsUnreadCount(requestModel)) { [weak self] result in
          switch result {
          case .success(let response):
              print("===\(response.room_id) ë°© DMê°œìˆ˜: \(response.count) ë„¤íŠ¸ì›Œí¬ ì„±ê³µ===")
              self?.dmData!.sectionData[index].unreadDMCnt = response.count

          case .failure(let error):
              print("===DM ì½ì§€ ì•Šì€ ì±„íŒ… ê°œìˆ˜ ë„¤íŠ¸ì›Œí¬ ì‹¤íŒ¨===")
              print("===DMë°© ì •ë³´: \(String(describing: self?.dmData?.sectionData[index].dmInfo))")
              print("===ì—ëŸ¬: \(error)===")
          }
          
          group.leave()
      }
  }
  
  group.notify(queue: .main) {
      completion()
  }
}
```

<br> </br>

### 2. ì†Œì¼“ í†µì‹  ì—°ê²° í•´ì œ ì‹œì  ì´ìŠˆ

#### Issue
ì‹¤ì‹œê°„ ì±„íŒ…ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì†Œì¼“ì„ ì—°ê²°í•´ì•¼ í–ˆê³ , ì†Œì¼“ ì—°ê²°ê³¼ í•´ì œ ì‹œì ì´ ì¤‘ìš”í–ˆìŠµë‹ˆë‹¤.
viewì— ë“¤ì–´ê°ˆ ë•Œ ë·°ë¥¼ êµ¬í˜„í•˜ë©´ì„œ ì†Œì¼“ì„ ì—°ê²°ì‹œì¼°ê³ , í™”ë©´ì„ ë‚˜ê°€ëŠ” ê²½ìš° viewDidDissapearì—ì„œ í•´ì œë¥¼ í–ˆì§€ë§Œ, **ì±„íŒ… í™”ë©´ì—ì„œ ì•±ì„ ì¢…ë£Œì‹œí‚¤ëŠ” ê²½ìš° ì†Œì¼“ì´ ì¢…ë£Œë˜ì§€ ì•ŠëŠ” ë¬¸ì œ**ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

#### Solution
`ChattingViewController`ì—ì„œëŠ” **deinit** ì‹œì ì— í•œë²ˆ ë” ì†Œì¼“ì˜ í•´ì œ ì—¬ë¶€ë¥¼ ì²´í¬í–ˆìŠµë‹ˆë‹¤.
ë˜í•œ `SceneDelegate`ì—ì„œ **ë°±ê·¸ë¼ìš´ë“œ** ì‹œì  ë˜ëŠ” **Sceneì´ ì¢…ë£Œ** ë˜ì—ˆì„ ë•Œ ì†Œì¼“ ì—°ê²°ì„ í•´ì œí•¨ìœ¼ë¡œì¨ ë¦¬ì†ŒìŠ¤ë¥¼ ìµœì í™”í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
//ChattingViewController

override func viewDidDisappear(_ animated: Bool) {
    super.viewDidDisappear(animated)
    
    print(#function)
    viewModel.disconnectSocket()
}

deinit {
    viewModel.disconnectSocket()
    print("===========ì±„ë„ ì±„íŒ…ë·° DEINIT============")
}
```

```swift
//SceneDelegate

func sceneDidDisconnect(_ scene: UIScene) {
    if SocketIOManager.shared.isOpen {
        SocketIOManager.shared.closeConnection()
    }
}

func sceneDidBecomeActive(_ scene: UIScene) {
    SocketIOManager.shared.reconnect()
}

func sceneDidEnterBackground(_ scene: UIScene) {
    SocketIOManager.shared.pauseConnect()
}
```


<br> </br>

## UI

#### âœ”ï¸ íšŒì›ê°€ì…, ë¡œê·¸ì¸  

<img width="1000" alt="image" src="https://github.com/chaeondev/Blink/assets/80023607/a37cb6a8-b156-49fa-82fc-92680f37b4c0">

#### âœ”ï¸ ì›Œí¬ìŠ¤í˜ì´ìŠ¤

<img width="1000" alt="image" src="https://github.com/chaeondev/Blink/assets/80023607/b240d41c-cb96-4385-9775-4ca42b37521d">


#### âœ”ï¸ ì±„ë„, DM

<img width="1000" alt="image" src="https://github.com/chaeondev/Blink/assets/80023607/5b6a2c40-bebb-4bd9-8655-d3c2cc9bf034">


#### âœ”ï¸ í”„ë¡œí•„, ì¸ì•±ê²°ì œ, Push Notification

<img width="1000" alt="image" src="https://github.com/chaeondev/Blink/assets/80023607/6dbd1c38-c6fb-4666-98f3-ffb6803a4034">




<div align=right> 
 
 [Previewë¡œ ëŒì•„ê°€ê¸°](https://github.com/chaeondev/Blink#preview)
 
</div>
